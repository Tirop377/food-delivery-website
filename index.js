const food_list = [
    {
        _id: "1",
        name: "Greek salad",
        image: "food_1",
        price: 12,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Salad"
    },
    {
        _id: "2",
        name: "Veg salad",
        image: "food_2",
        price: 18,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Salad"
    }, {
        _id: "3",
        name: "Clover Salad",
        image: "food_3",
        price: 16,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Salad"
    }, {
        _id: "4",
        name: "Chicken Salad",
        image: "food_4",
        price: 24,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Salad"
    }, {
        _id: "5",
        name: "Lasagna Rolls",
        image: "food_5",
        price: 14,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Rolls"
    }, {
        _id: "6",
        name: "Peri Peri Rolls",
        image: "food_6",
        price: 12,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Rolls"
    }, {
        _id: "7",
        name: "Chicken Rolls",
        image: "food_7",
        price: 20,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Rolls"
    }, {
        _id: "8",
        name: "Veg Rolls",
        image: "food_8",
        price: 15,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Rolls"
    }, {
        _id: "9",
        name: "Ripple Ice Cream",
        image: "food_9",
        price: 14,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Deserts"
    }, {
        _id: "10",
        name: "Fruit Ice Cream",
        image: "food_10",
        price: 22,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Deserts"
    }, {
        _id: "11",
        name: "Jar Ice Cream",
        image: "food_11",
        price: 10,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Deserts"
    }, {
        _id: "12",
        name: "Vanilla Ice Cream",
        image: "food_12",
        price: 12,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Deserts"
    },
    {
        _id: "13",
        name: "Chicken Sandwich",
        image: "food_13",
        price: 12,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Sandwich"
    },
    {
        _id: "14",
        name: "Vegan Sandwich",
        image: "food_14",
        price: 18,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Sandwich"
    }, {
        _id: "15",
        name: "Grilled Sandwich",
        image: "food_15",
        price: 16,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Sandwich"
    }, {
        _id: "16",
        name: "Bread Sandwich",
        image: "food_16",
        price: 24,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Sandwich"
    }, {
        _id: "17",
        name: "Cup Cake",
        image: "food_17",
        price: 14,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Cake"
    }, {
        _id: "18",
        name: "Vegan Cake",
        image: "food_18",
        price: 12,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Cake"
    }, {
        _id: "19",
        name: "Butterscotch Cake",
        image: "food_19",
        price: 20,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Cake"
    }, {
        _id: "20",
        name: "Sliced Cake",
        image: "food_20",
        price: 15,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Cake"
    }, {
        _id: "21",
        name: "Garlic Mushroom ",
        image: "food_21",
        price: 14,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Pure Veg"
    }, {
        _id: "22",
        name: "Fried Cauliflower",
        image: "food_22",
        price: 22,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Pure Veg"
    }, {
        _id: "23",
        name: "Mix Veg Pulao",
        image: "food_23",
        price: 10,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Pure Veg"
    }, {
        _id: "24",
        name: "Rice Zucchini",
        image: "food_24",
        price: 12,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Pure Veg"
    },
    {
        _id: "25",
        name: "Cheese Pasta",
        image: "food_25",
        price: 12,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Pasta"
    },
    {
        _id: "26",
        name: "Tomato Pasta",
        image: "food_26",
        price: 18,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Pasta"
    }, {
        _id: "27",
        name: "Creamy Pasta",
        image: "food_27",
        price: 16,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Pasta"
    }, {
        _id: "28",
        name: "Chicken Pasta",
        image: "food_28",
        price: 24,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Pasta"
    }, {
        _id: "29",
        name: "Buttter Noodles",
        image: "food_29",
        price: 14,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Noodles"
    }, {
        _id: "30",
        name: "Veg Noodles",
        image: "food_30",
        price: 12,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Noodles"
    }, {
        _id: "31",
        name: "Somen Noodles",
        image: "food_31",
        price: 20,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Noodles"
    }, {
        _id: "32",
        name: "Cooked Noodles",
        image: "food_32",
        price: 15,
        description: "Food provides essential nutrients for overall health and well-being",
        category: "Noodles"
    }
]


const foodArea = document.querySelector(".foodArea");
let foodHtml = "";

function generateFoodHtml(){
    let foodDiv;

    food_list.forEach((food)=>{
        foodDiv = `
            <div class="food-container">
                <div class="food-image">
                    <img src="./resources/foods-images/${food.image}.png" class="big-food-image" alt="" >
                    <div class="controls" data-name = "${food.name}">
                        <button class="minusButton" data-name = "${food.name}" data-id="${food._id}"><img src="./resources/icons/remove_icon_red.png" alt=""></button>
                        <span class="foodAmount">1</span>
                        <button class="addButton" data-name = "${food.name}" data-id="${food._id}"><img src="./resources/icons/add_icon_green.png" alt=""></button> 
                    </div>
                </div>
                <div class="food-title">
                    <span class="food-name">${food.name}</span>
                    <img src="./resources/rating_starts.png" alt=""  >
                </div>
                <p>${food.description}</p>
                <span class="food-price">Ksh ${(food.price*10).toFixed(2)}</span>
            </div>
        `
        foodHtml += foodDiv;
    })

}
generateFoodHtml();
foodArea.innerHTML = foodHtml;

const menu = document.querySelectorAll(".menu-container");
const menuImage = document.querySelectorAll(".menuImage");
const H2 = document.querySelectorAll(".selectedH2");
let categoryClicked;

menu.forEach((item, index)=>{
    item.addEventListener('click', ()=>{
        let categoryName = item.dataset.categoryname
        if(categoryClicked === categoryName){
            menuImage[index].style.borderWidth = "0px"
            H2[index].style.color = "rgb(97, 93, 93)";
            foodHtml = "";
            generateFoodHtml();
            foodArea.innerHTML = foodHtml;
            controlsEventListener();
        }else{
            menuImage.forEach((image)=>image.style.borderWidth = "0px")
            H2.forEach((h)=>h.style.color = "rgb(97, 93, 93)")
            menuImage[index].style.borderWidth = "5px"
            H2[index].style.color = "rgb(7, 194, 7)";
            categoryClicked = categoryName;
            generateCategoryFood(categoryName);
            foodArea.innerHTML = foodHtml;
            controlsEventListener();
        }
        
    })

})

function generateCategoryFood(categoryName){
    let foodDiv;
    foodHtml = "";

    food_list.forEach((food)=>{
        if(categoryName === food.category){
             foodDiv = `
                <div class="food-container">
                    <div class="food-image">
                        <img src="./resources/foods-images/${food.image}.png" class="big-food-image" alt="" >
                        <div class="controls"  data-name = "${food.name}">
                            <button class="minusButton displayNone" data-name = "${food.name}" data-id="${food._id}"><img src="./resources/icons/remove_icon_red.png" alt=""></button>
                            <span class="foodAmount displayNone">1</span>
                            <button class="addButton" data-name = "${food.name}" data-id="${food._id}"><img src="./resources/icons/add_icon_green.png" alt=""></button>                        
                        </div>
                    </div>
                    <div class="food-title">
                        <span class="food-name">${food.name}</span>
                        <img src="./resources/rating_starts.png" alt=""  >
                    </div>
                    <p>${food.description}</p>
                    <span class="food-price">Ksh ${(food.price*10).toFixed(2)}</span>
                </div>
            `
            foodHtml += foodDiv;
        }   
    })
}


let Foodcart = [];
controlsEventListener();

function controlsEventListener() {
    let controlsDiv = document.querySelectorAll('.controls');
    let addFoodButton = document.querySelectorAll('.addButton');
    let quantitySpanElements = document.querySelectorAll(".foodAmount");
    let minusButtonElements = document.querySelectorAll(".minusButton")

    addFoodButton.forEach((btn, index)=>{
        btn.addEventListener('click', ()=>{
            controlsDiv[index].style.backgroundColor = "white";
            quantitySpanElements[index].style.display = "block";
            minusButtonElements[index].style.display = "block";
        })
    })
    handleQuantyty(); 
}




function handleQuantyty() {
    let addFoodButton = document.querySelectorAll('.addButton');
    let minusButtonElements = document.querySelectorAll(".minusButton")
    let quantitySpanElements = document.querySelectorAll(".foodAmount");
    let controlsDiv = document.querySelectorAll('.controls');
    addFoodButton.forEach((addbtn, index)=>{
        addbtn.addEventListener('click', ()=>{
            let foodName = addbtn.dataset.name;
            let foodId = addbtn.dataset.id;
            let itemFound = false;
            if(Foodcart.length > 0){
                Foodcart.forEach((item)=>{
                    if(item.name === foodName){
                        itemFound = true;
                        item.quantity = item.quantity + 1;  
                        quantitySpanElements[index].innerHTML = `${item.quantity}`;
                    }
                })
                
                if(itemFound === false){
                    Foodcart.push({name: foodName, quantity: 1, id:foodId});
                    console.log(Foodcart);
                }
            }else{
                Foodcart.push({name: foodName, quantity: 1, id:foodId});
                console.log(Foodcart);
            }
        })
    })   

    minusButtonElements.forEach((minusbtn, index)=>{
        minusbtn.addEventListener('click', ()=>{
            let foodName = minusbtn.dataset.name;
            if(Foodcart.length > 0){
                Foodcart.forEach((item, i)=>{
                    if(item.name === foodName){
                        item.quantity = item.quantity - 1;
                        quantitySpanElements[index].innerHTML = `${item.quantity}`;
                        if(item.quantity <= 0){
                            Foodcart.slice(i, 1);
                            controlsDiv[index].style.backgroundColor = "transparent";
                            quantitySpanElements[index].style.display = "none";
                            minusButtonElements[index].style.display = "none";
                        } 
                    }
                })
            }
        })
    }) 
}





